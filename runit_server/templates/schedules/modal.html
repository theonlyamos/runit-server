<div class="modal fade" id="scheduleModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-mono">
                    <i class="fas fa-clock text-accent me-2"></i>
                    <span id="schedule-modal-title">New Schedule</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="schedule-form">
                    <input type="hidden" id="schedule-id" name="schedule_id">
                    
                    <div class="form-group mb-3">
                        <label for="project-id" class="form-label">Project</label>
                        <select class="form-select" id="project-id" name="project_id" required onchange="loadProjectFunctions(this.value)">
                            <option value="">Select a project</option>
                            {% for project in projects %}
                            <option value="{{ project.id }}">{{ project.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="schedule-name" class="form-label">Schedule Name</label>
                        <input type="text" class="form-control" id="schedule-name" name="name" 
                               placeholder="e.g., Daily cleanup" required>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="function-name" class="form-label">Function to Run</label>
                        <select class="form-select" id="function-name" name="function" required>
                            <option value="">Select a project first</option>
                        </select>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="cron-preset" class="form-label">Schedule Preset</label>
                        <select class="form-select" id="cron-preset" onchange="setCronFromPreset(this.value)">
                            <option value="">Custom schedule</option>
                            {% for preset in cron_presets %}
                            <option value="{{ preset.expression }}">{{ preset.label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="cron-expression" class="form-label">Cron Expression</label>
                        <input type="text" class="form-control form-control-mono" id="cron-expression" 
                               name="cron_expression" placeholder="* * * * *" required>
                        <small class="text-muted">minute hour day month weekday</small>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="timezone" class="form-label">Timezone</label>
                        <select class="form-select" id="timezone" name="timezone">
                            {% for tz in timezones %}
                            <option value="{{ tz }}" {% if tz == 'UTC' %}selected{% endif %}>{{ tz }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label for="description" class="form-label">Description (optional)</label>
                        <textarea class="form-control" id="description" name="description" rows="2"
                                  placeholder="Brief description of this scheduled job"></textarea>
                    </div>
                    
                    <div class="form-group mb-3">
                        <label class="form-label d-flex align-items-center gap-2">
                            <input type="checkbox" name="enabled" id="schedule-enabled" checked class="form-check-input m-0">
                            Enabled
                        </label>
                        <small class="text-muted">Schedule will run automatically when enabled</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-accent" onclick="saveSchedule()">
                    <i class="fas fa-save fa-fw me-1"></i>
                    Save Schedule
                </button>
            </div>
        </div>
    </div>
</div>
